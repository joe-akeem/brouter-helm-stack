# Default values for brouter-web.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: joeakeem/brouter-web
  pullPolicy: Always
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Automatically mount a ServiceAccount's API credentials?
  automount: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

livenessProbe:
  httpGet:
    path: /
    port: http
readinessProbe:
  httpGet:
    path: /
    port: http

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

volumes:
  - name: keys-volume
    configMap:
      name: brouter-web-keys
  - name: config-volume
    configMap:
      name: brouter-web-config
  - name: languages-volume
    configMap:
      name: brouter-web-languages

volumeMounts:
  - name: keys-volume
    mountPath: /usr/share/nginx/html/keys.js
    subPath: keys.js
  - name: config-volume
    mountPath: /usr/share/nginx/html/config.js
    subPath: config.js
  - name: languages-volume
    mountPath: /usr/share/nginx/html/dist/locales/en.json
    subPath: en.json

nodeSelector: {}

tolerations: []

affinity: {}

configFiles:
  keys: |
    (function () {
      // COPYING: Please get your own API keys from the sites listed below
  
      BR.keys = {
          // Bing maps, https://www.microsoft.com/maps/default.aspx
          bing: '',
  
          // DigitalGlobe, https://developer.digitalglobe.com/maps-api/#plans
          digitalGlobe: '',
  
          // Thunderforest, https://thunderforest.com/pricing/
          thunderforest: '',
  
          // Strava API token in case you want to display Strava segments
          strava: '',
  
          // OpenMapSurfer (OpenRouteService API), https://openrouteservice.org/plans/
          openrouteservice: '',
  
          // Mapillary, https://www.mapillary.com/dashboard/developers
          mapillary: ``,
  
          // IGN France (for Scan25 base layer), https://geoservices.ign.fr/actualites/2023-11-20-acces-donnesnonlibres-gpf
          ignf: '',
      };
    })();
  config: |
    (function () {
        var hostname = window.location.hostname;
        var origin = window.location.protocol + '//' + hostname + (window.location.port ? ':' + window.location.port : '');
    
        BR.conf = {};
    
        // Switch for intermodal routing demo
        BR.conf.transit = false;
        // or as query parameter (index.html?transit=true#zoom=...)
        // (uses search/query (?) not hash (#) params, as config only executed once at load)
        // TODO not included in permalink (better replace permalink with hash plugin)
        //var params = new URLSearchParams(window.location.search.slice(1));
        //BR.conf.transit = params.has('transit') && (params.get('transit') === 'true');
    
        if (hostname.endsWith('brouter.de')) {
            // online service (brouter.de) configuration
    
            BR.conf.host = origin;
            BR.conf.profilesUrl = origin + '/profiles3/';
        } else {
            // desktop configuration
    
            BR.conf.host = 'http://localhost:17777';
    
            // Pre-loading selected profile disabled locally. Needs brouter-web to run on a
            // local web server with the profiles in a subdirectory or allowing file access
            // in the Browser (security!), see
            // https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally
            BR.conf.profilesUrl = 'http://localhost:8090/profiles3/';
        }
    
        // name of the web app/instance, e.g. used as GPX creator and link text
        BR.conf.appName = 'BRouter-Web';
        BR.conf.privacyPolicyUrl = '/privacypolicy.html';
    
        // Set the initial position and zoom level of the map
        BR.conf.initialMapLocation = [50.99, 9.86];
        BR.conf.initialMapZoom = 5;
    
        BR.conf.profiles = [
            'trekking',
            'fastbike',
            'car-eco',
            'car-fast',
            'safety',
            'shortest',
            'trekking-ignore-cr',
            'trekking-steep',
            'trekking-noferries',
            'trekking-nosteps',
            'moped',
            'rail',
            'river',
            'vm-forum-liegerad-schnell',
            'vm-forum-velomobil-schnell',
            'fastbike-lowtraffic',
            'fastbike-asia-pacific',
            'hiking-mountain',
        ];
    
        // Map old, renamed legacy profile to new name (from hash of shared or bookmarked URLs)
        BR.conf.profilesRename = {
            'hiking-beta': 'hiking-mountain',
        };
    
        // Removes default base layers when 'true'. Useful for only having custom layers (see below).
        BR.conf.clearBaseLayers = false;
    
        // Add custom tile layers
        // URL template see http://leafletjs.com/reference.html#tilelayer
        // Multiple entries separated by comma (,)
        BR.conf.baseLayers = {
            // 'display name': 'url'[,]
            // e.g. for offline tiles with https://github.com/develar/mapsforge-tile-server
            //'Mapsforge Tile Server': 'http://localhost:6090/{z}/{x}/{y}.png'
        };
    
        // Base layer to show on start, as position number in the layer switcher, starting from 0, default is first
        BR.conf.defaultBaseLayerIndex = 0;
    
        // Initial route line transparency (0-1, overridden by stored slider setting)
        BR.conf.defaultOpacity = 0.67;
    
        // Minimum transparency slider value on load, values between 0 and 1 (0=invisible).
        // 0 = no minimum, use stored setting; 1 = always reset to full visibility on load
        BR.conf.minOpacity = 0.3;
    
        BR.conf.routingStyles = {
            trailer: {
                weight: 5,
                dashArray: [10, 10],
                opacity: 0.6,
                color: 'magenta',
            },
            track: {
                weight: 5,
                color: 'magenta',
                opacity: BR.conf.defaultOpacity,
            },
            trackCasing: {
                weight: 8,
                color: 'white',
                // assumed to be same as track, see setOpacity
                opacity: BR.conf.defaultOpacity,
            },
            nodata: {
                color: 'darkred',
            },
            beeline: {
                weight: 5,
                dashArray: [1, 10],
                color: 'magenta',
                opacity: BR.conf.defaultOpacity,
            },
            beelineTrailer: {
                weight: 5,
                dashArray: [1, 10],
                opacity: 0.6,
                color: 'magenta',
            },
        };
    
        BR.conf.markerColors = {
            // awesome-markers colors (by color picker)
            poi: '#436978',
            start: '#72b026',
            via: '#38aadd',
            stop: '#d63e2a',
        };
    
        // transit (intermodal routing) demo config
        if (BR.conf.transit) {
            BR.conf.profiles = [
                '../im/bike',
                '../im/foot',
                '../im/like-bike',
                '../im/like-foot',
                'trekking',
                'fastbike',
                'shortest',
                'moped',
                'car-test',
            ];
        }
    
        // regex needs to be in sync with server, see ServerHandler.getTrackName()
        BR.conf.tracknameAllowedChars = 'a-zA-Z0-9 \\._\\-';
    
        BR.conf.overpassBaseUrl = 'https://overpass.kumi.systems/api/interpreter';
    
        // File size limit in kb for loading tracks
        BR.conf.trackSizeLimit = 1024 * 10;
    })();
    

languages:
    # Just an example of how to add or modify language properties. Make sure to also add a volume mount, see above
  - name: en.json
    content: |
      {
        "about": {
          "bug-reports": "Bug reports and feature requests:",
          "bug-reports-back": "server / backend, routing engine, Android app, profiles, brouter.de site",
          "bug-reports-front": "web client / frontend.",
          "chat": "Chat with users and developers",
          "contact": "Contact:",
          "contact-language": "Preferred language is English, as we have both international contributors and users.",
          "data": "Data:",
          "data-description": "This is based on <a href=\"https://www.openstreetmap.org\" target=\"_blank\">OpenStreetMap</a>. It is usually updated daily, see dates of <a href=\"https://brouter.de/brouter/segments4/\" target=\"_blank\">data files</a>.",
          "description": "Online service of the BRouter routing engine. For the offline Android app and more information see <a href=\"https://brouter.de/\" target=\"_blank\">brouter.de</a>",
          "details": "<i><a href=\"{{privacyPolicyUrl}}\" target=\"_blank\">Privacy Policy</a></i>, \n<i><a href=\"https://github.com/nrenner/brouter-web#credits-and-licenses\" target=\"_blank\">Credits</a></i>,\n<i><a href=\"https://github.com/nrenner/brouter-web/blob/master/CHANGELOG.md\" target=\"_blank\">Changelog</a></i> and\n<i><a href=\"https://github.com/nrenner/brouter-web#readme\" target=\"_blank\">more info</a></i> on the client.",
          "support": "General discussions/questions, support",
          "title": "About",
          "tooltip": "Show more information about BRouter-Web"
        },
        "credits": {
          "boundaries": "Administrative Boundaries: <a href=\"https://osm-boundaries.com\" target=\"_blank\">OSM-Boundaries</a>, <a href=\"https://overpass-api.de/\" class=\"overpass-url\" target=\"_blank\">Overpass API</a>",
          "brouter": "BRouter",
          "brouter-license": "<a target=\"_blank\" href=\"https://brouter.de/brouter\">BRouter</a> &copy; Arndt Brenschede",
          "elevation-data": "Elevation data",
          "esri-license": "<a target=\"_blank\" href=\"http://goto.arcgisonline.com/maps/World_Imagery\">World Imagery</a> &copy; <a target=\"_blank\" href=\"https://www.esri.com/\">Esri</a>, sources: Esri, DigitalGlobe, Earthstar Geographics, CNES/Airbus DS, GeoEye, USDA FSA, USGS, Getmapping, Aerogrid, IGN, IGP, and the GIS User Community",
          "esri-tiles": "Esri World Imagery",
          "map-data": "Map data",
          "map-tiles": "Map tiles",
          "nominatim": "Search by <a href=\"https://wiki.openstreetmap.org/wiki/Nominatim\" target=\"_blank\" data-i18n=\"credits.nominatim\">Nominatim</a>",
          "openstreetmap": "&copy; <a target=\"_blank\" href=\"https://www.openstreetmap.org/copyright\" >OpenStreetMap contributors</a> under <a target=\"_blank\" href=\"https://opendatacommons.org/licenses/odbl/\" >ODbL</a>",
          "pois": "Locations (POIs): <a href=\"https://overpass-api.de/\" class=\"overpass-url\" target=\"_blank\">Overpass API</a>",
          "title": "Credits"
        },
        "export": {
          "format": "Format",
          "format_csv": "CSV",
          "format_geojson": "GeoJSON",
          "format_gpx": "GPX",
          "format_kml": "KML",
          "include": "Include",
          "include_waypoints": "Waypoints",
          "route-from-to": "{{from}} -> {{to}} ({{distance}}km)",
          "route-loop": "{{from}} ({{distance}}km)",
          "title": "Export route",
          "trackname": "Name"
        },
        "footer": {
          "ascend": "Ascend",
          "beeline-warning": "Warning: no data for straight lines, values interpolated",
          "cost": "Cost",
          "distance": "Distance",
          "elevation-chart": "Toggle elevation chart",
          "energy-per-100km": "Energy per 100 km",
          "hours": "hours",
          "hours-abbrev": "h",
          "kilometer": "kilometers",
          "kilometer-abbrev": "km",
          "kilowatthour": "kilowatt hours",
          "kilowatthour-abbrev": "kWh",
          "mean-cost-factor": "Mean cost factor",
          "meter": "meters",
          "meter-abbrev": "m",
          "no-elevation-data": "No elevation data available for this route.",
          "plain-ascend": "Plain ascend",
          "stats-info": "Start drawing a route to get stats.",
          "total-energy": "Total Energy",
          "travel-time": "Travel time"
        },
        "keyboard": {
          "backspace": "Backspace",
          "escape": "Escape",
          "generic-shortcut": "{{action}} ({{key}} key)",
          "shift": "Shift"
        },
        "layers": {
          "add-base": "Add base layer",
          "add-overlay": "Add overlay",
          "add-overpass": "Add overpass query",
          "custom-layer-name-helptext": "ex: OpenStreetMap",
          "custom-layer-name-label": "Custom layer name",
          "custom-layer-url-helptext-normal": "URL for normal layers, ex: https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
          "custom-layer-url-helptext-overpass": "Overpass Query, ex: nwr[shop]['diet:vegan']['diet:vegan'!=no];",
          "custom-layer-url-label": "Custom layer URL/Query",
          "customize": "Customize layers",
          "opacity-slider": "Opacity slider",
          "overpass-loading-indicator": "Running Overpass API query ...",
          "remove-selection": "Remove selection"
        },
        "loadNogos": {
          "defaultProperties": "Default properties",
          "error": {
            "invalid-default-nogo-radius": "Invalid default nogo radius.",
            "invalid-nogo-buffering-radius": "Invalid nogo buffering radius.",
            "loading-file-error": "Could not load file: {{err}}.",
            "loading-file-too-big": "Too many nogo areas in this file! Please simplify the geometry and/or reduce the number of zones.",
            "loading-file-unexpected": "Unexpected error when loading this file.",
            "missing-default-nogo-weight": "Missing default nogo weight.",
            "missing-file-url": "Missing file or URL.",
            "no-valid-area": "No valid area found in provided input."
          },
          "file": "File (.geojson)",
          "load": "Load",
          "nogoBuffer": "Buffer no-go areas (in meters)",
          "nogoRadius": "No-go radius for points (in meters)",
          "nogoWeight": "No-go weight (-1 means impassable)",
          "source": "Source",
          "title": "Load no-go areas",
          "url": "URL"
        },
        "map": {
          "attribution-osm-long": "OpenStreetMap contributors",
          "attribution-osm-short": "OpenStreetMap",
          "clear-route": "Clear route data",
          "copyright": "Copyright",
          "cycling": "Cycling",
          "delete-last-point": "Delete last point",
          "delete-nogo-areas": "Delete all no-go areas",
          "delete-pois": "Delete all points of interest",
          "delete-route": "Delete route",
          "draw-circlego-start": "Draw limited go-to zone",
          "draw-circlego-stop": "Stop drawing limited go-to zone",
          "draw-poi-start": "Draw points of interest",
          "draw-poi-stop": "Stop drawing points of interest",
          "draw-route-start": "Draw route",
          "draw-route-stop": "Stop drawing route",
          "enter-poi-name": "Enter Point of Interest name",
          "geocoder": "Search",
          "geocoder-placeholder": "Search…",
          "hikebike-hillshading": "Hillshading",
          "hiking": "Hiking",
          "layer": {
            "bing": "Bing Aerial",
            "cycle": "OpenCycleMap (Thunderf.)",
            "cycling": "Cycling (Waymarked Trails)",
            "digitalglobe": "DigitalGlobe Recent Imagery",
            "esri": "Esri World Imagery",
            "hikebike-hillshading": "Hillshading (Hike & Bike Map)",
            "hiking": "Hiking (Waymarked Trails)",
            "hillshading": "Hillshading",
            "osm": "OpenStreetMap",
            "osmde": "OpenStreetMap.de",
            "outdoors": "Outdoors (Thunderforest)",
            "route-quality": "Route quality coding",
            "stamen-terrain": "Terrain (Stamen)",
            "strava-segments": "Strava segments",
            "topo": "OpenTopoMap"
          },
          "loading": "Loading…",
          "locate-me": "Show me where I am",
          "nogo": {
            "cancel": "Cancel drawing no-go area",
            "click-drag": "Click and drag to draw circle",
            "draw": "Draw circular no-go area",
            "edit": "Click to edit",
            "help": "&square; = move / resize, <span class=\"fa fa-trash-o\"></span> = delete,<br>click circle to quit editing"
          },
          "not-applicable-here": "not applicable here",
          "opacity-slider": "Set transparency of route track and markers",
          "opacity-slider-shortcut": "{{action}}\n(Hold {{key}} key to mute temporarily)",
          "preview": "Preview",
          "privacy": "Privacy",
          "reverse-route": "Reverse route",
          "route-quality-altitude": "Altitude coding",
          "route-quality-cost": "Cost coding",
          "route-quality-incline": "Incline coding",
          "route-quality-shortcut": "{{action}} ({{key}} key to toggle)",
          "route-tooltip-segment": "Drag to create a new waypoint. Click to toggle straight line.",
          "route-tooltip-waypoint": "Waypoint. Drag to move; Click to remove.",
          "strava-biking": "Show Strava biking segments",
          "strava-running": "Show Strava running segments",
          "strava-shortcut": "{{action}}\n({{key}} key to toggle layer, click to reload for current area)",
          "toggle-beeline": "Toggle straight line",
          "zoomInTitle": "Zoom in",
          "zoomOutTitle": "Zoom out"
        },
        "modal": {
          "close": "Close",
          "or": ""
        },
        "navbar": {
          "about": "About",
          "alternative": {
            "first": "1st alternative",
            "original": "Original",
            "second": "2nd alternative",
            "third": "3rd alternative"
          },
          "export": "Export",
          "export-tooltip": "Export route",
          "load": {
            "nogos": "Load no-go areas",
            "title": "Load",
            "tooltip": "{{tracksAction}} ({{tracksKey}} key)\n{{trackAsRouteAction}} ({{trackAsRouteKey}})\n{{nogosAction}} ({{nogosKey}})",
            "tracks": "Load tracks"
          },
          "profile": {
            "fastbike": "Fastbike",
            "fastbike-asia-pacific": "Fastbike (Asia Pacific)",
            "fastbike-lowtraffic": "Fastbike (low traffic)",
            "hiking-mountain": "Hiking",
            "moped": "Moped",
            "rail": "Rail",
            "river": "River",
            "safety": "Safety",
            "shortest": "Shortest",
            "trekking": "Trekking bike",
            "trekking-ignore-cr": "Trekking bike (ignore cycle routes)",
            "trekking-noferries": "Trekking bike (no ferries)",
            "trekking-nosteps": "Trekking bike (no steps)",
            "trekking-steep": "Trekking bike (steep)",
            "vm-forum-liegerad-schnell": "Recumbent bike (fast)",
            "vm-forum-velomobil-schnell": "Velomobile (fast)"
          },
          "profile-tooltip": "\n({{key}} key to switch)"
        },
        "searchfav": {
          "addfavorite": "add as favorite",
          "ask_removeall": "Do you want to delete all search favorites?",
          "export": "export favorites to file",
          "import": "import favorites from file",
          "openfavorites": "open favorite list",
          "removeall": "delete all favorites"
        },
        "sidebar": {
          "analysis": {
            "header": {
              "highway": "Highway",
              "smoothness": "Smoothness",
              "surface": "Surface"
            },
            "table": {
              "category": "Category",
              "length": "Length",
              "total_known": "Total Known:",
              "unknown": "Unknown"
            },
            "title": "Analysis",
            "tooltip": "Analyse route"
          },
          "customize-profile": {
            "title": "Customize profile",
            "tooltip": "Customize profile"
          },
          "data": {
            "sync-map": "Synchronize map",
            "title": "Data",
            "tooltip": "Show detailed route data table"
          },
          "itinerary": {
            "title": "Itinerary",
            "tooltip": "Show itinerary"
          },
          "layers": {
            "category": {
              "base-layers": "Base layers",
              "country": "Country",
              "europe": "Europe",
              "europe-monolingual": "Europe monolingual",
              "overlays": "Overlays",
              "overpass": "Locations (POIs)",
              "worldwide": "Worldwide",
              "worldwide-international": "Worldwide international",
              "worldwide-monolingual": "Worldwide monolingual"
            },
            "collapse": "Collapse all",
            "custom-layers": "Custom layers",
            "customize": "Add or remove custom layers",
            "expand": "Expand all",
            "optional": "Add or remove optional layers",
            "optional-layers": "More",
            "overlay-opacity": "Overlay transparency",
            "overlay-opacity_plural": "Overlays transparency",
            "table": {
              "URL": "URL/Query",
              "empty": "No custom layer configured yet.",
              "name": "Name",
              "type": "Type",
              "type_layer": "Layer",
              "type_overlay": "Overlay",
              "type_overpass_query": "Overpass Query"
            },
            "title": "Layers",
            "tooltip": "Select layers"
          },
          "profile": {
            "apply": "Apply",
            "clear": "Clear",
            "help": "Help",
            "no_easy_configuration_warning": "No easy configuration is available for this profile.",
            "options": "Options",
            "placeholder": "Write your custom profile here.",
            "profile": "Profile"
          },
          "tab-tooltip": "{{action}}\n({{toggleKey}} key to toggle, {{switchKey}} to switch to next tab)"
        },
        "title": "BRouter web client",
        "trackasroute": {
          "browse": "Browse",
          "explainpoi": "(show waypoints as POI's)",
          "explaintracklayer": "(show Track as separate Layer)",
          "file": "Trackfile",
          "fuzziness": "Fuzziness",
          "pleasewait": "Please wait!",
          "showpois": "POI's",
          "title": "Load Track as Route",
          "tracklayer": "Track Layer",
          "tuning": "Tuning"
        },
        "warning": {
          "cannot-get-route": "Error getting route URL",
          "invalid-route-from": "Start marker is too far from a route.",
          "invalid-route-to": "Destination marker is too far from a route.",
          "no-response": "no response from server",
          "no-route-found": "Error: cannot find a route for given points. Maybe try to move them closer to roads?",
          "profile-error": "Profile error: no or empty response from server",
          "strava-error": "Error getting Strava segments: {{error}}",
          "temporary-profile": "<strong>Note:</strong> Uploaded custom profiles are only cached temporarily on the server.<br/>Please save your edits to your local PC.",
          "tracks-load-error": "Error loading tracks: {{error}}",
          "upload-error": "Upload error: {{error}}"
        },
        "whatsnew": {
          "new-version": "A new version was released since your last visit. Click <a href='.' data-toggle='modal' data-target='#whatsnew'>here</a> to see what's new!",
          "title": "What's new?"
        }
      }
      
